<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X.X Giyim - Tarzını Keşfet</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        /* Inter Font'u varsayılan olarak ayarlıyoruz */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap');
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #f7f7f7; 
            color: #1f2937;
        }

        /* Sabit Başlık (Header) için yüksek z-index */
        header { z-index: 1000; }
        
        /* Modalın merkezlenmesi */
        .modal {
            background-color: rgba(0,0,0,0.7);
            transition: opacity 0.3s ease;
        }

        /* Sepet Miktar Input stilini sıfırlama */
        .qty-input {
            -moz-appearance: textfield;
        }
        .qty-input::-webkit-outer-spin-button,
        .qty-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        .hidden { display: none !important; }

        /* Görüntüye özel hover efekti için group sınıfı kullanılır */
        .group:hover .product-image {
            transform: scale(1.05);
        }
        
        /* Favori butonu animasyonu */
        .wishlist-btn-active i {
            color: #ef4444; /* Kırmızı */
            transform: scale(1.15);
            transition: all 0.2s ease;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#b91c1c', /* Koyu Kırmızı (Red-700) */
                        secondary: '#fca5a5', /* Açık Kırmızı (Red-300) */
                    },
                }
            }
        }
    </script>
</head>
<body>

    <!-- Sabit Başlık -->
    <header class="sticky top-0 bg-white shadow-lg z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center py-4">
            <a href="#" class="logo nav-link flex items-center space-x-2" data-page="home">
                <i class="fas fa-tshirt text-primary text-3xl"></i>
                <span class="text-2xl font-extrabold text-gray-800">X.X GİYİM</span>
            </a>
            <nav>
                <ul class="flex items-center space-x-6">
                    <li><a href="#home" class="nav-link text-gray-600 hover:text-primary transition font-semibold" data-page="home">Ana Sayfa</a></li>
                    <li><a href="#products" class="nav-link text-gray-600 hover:text-primary transition font-semibold" data-page="home" onclick="scrollToProducts(event)">Ürünler</a></li>
                    <li><a href="#" class="nav-link text-gray-600 hover:text-primary transition font-semibold" data-page="about">Hakkımızda</a></li>
                    
                    <!-- İKONLAR VE SAYACLAR -->
                    <li class="flex space-x-4">
                        <!-- İstek Listesi İkonu -->
                        <a id="wishlist-icon" class="nav-link relative cursor-pointer" data-page="wishlist">
                            <i class="fas fa-heart text-2xl text-gray-700 hover:text-red-500 transition"></i>
                            <span id="wishlist-count" class="absolute -top-3 -right-3 bg-red-500 text-white text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full border-2 border-white">0</span>
                        </a>

                        <!-- Sepet İkonu -->
                        <a id="cart-icon" class="nav-link relative cursor-pointer" data-page="cart">
                            <i class="fas fa-shopping-cart text-2xl text-gray-700 hover:text-primary transition"></i>
                            <span id="cart-count" class="absolute -top-3 -right-3 bg-primary text-white text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full border-2 border-white">0</span>
                        </a>
                        
                        <!-- Kullanıcı Profili İkonu -->
                         <a id="profile-icon" class="nav-link relative cursor-pointer" data-page="profile">
                            <i class="fas fa-user-circle text-2xl text-gray-700 hover:text-blue-600 transition"></i>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- ANA SAYFA (HOME) -->
    <div id="page-home">
        <!-- Hero Section -->
        <section class="hero h-96 md:h-[60vh] bg-cover bg-center flex items-center justify-center text-white text-center rounded-b-xl shadow-inner mb-12" 
                 style="background-image: url('https://images.unsplash.com/photo-1483985988355-763728e1935b?q=80&w=2070&auto=format&fit=crop');">
            <div class="bg-black bg-opacity-40 p-8 rounded-xl">
                <h1 class="text-4xl md:text-6xl font-extrabold mb-4 drop-shadow-lg">Tarzını Bizimle Keşfet</h1>
                <p class="text-lg md:text-xl mb-8 font-light">En yeni trendler ve zamansız parçalarla gardırobunu yenile.</p>
                <a href="#products" class="bg-primary hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full shadow-2xl transition duration-300 ease-in-out transform hover:scale-105 inline-block" onclick="scrollToProducts(event)">Şimdi Alışverişe Başla</a>
            </div>
        </section>
        
        <!-- Ürünler, Filtreleme ve Sıralama -->
        <main id="main-content" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <h2 class="text-3xl font-bold text-center mb-10 text-gray-800">Tüm Ürünler</h2>

            <div class="flex flex-col md:flex-row gap-4 mb-10 items-center bg-white p-4 rounded-xl shadow-md">
                <div class="search-bar flex-grow">
                    <input type="text" id="product-search" placeholder="Ürün veya marka ara..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition">
                </div>
                <div class="filter-select w-full md:w-auto">
                    <select id="brand-filter" class="w-full p-3 border border-gray-300 rounded-lg bg-white appearance-none cursor-pointer focus:ring-primary focus:border-primary transition">
                        <option value="">Tüm Markalar</option>
                    </select>
                </div>
                <!-- YENİ: Sıralama Seçeneği -->
                <div class="sort-select w-full md:w-auto">
                    <select id="sort-by" class="w-full p-3 border border-gray-300 rounded-lg bg-white appearance-none cursor-pointer focus:ring-primary focus:border-primary transition">
                        <option value="default">Sıralama</option>
                        <option value="price-asc">Fiyat: Düşükten Yükseğe</option>
                        <option value="price-desc">Fiyat: Yüksekten Düşüğe</option>
                        <option value="name-asc">İsim (A-Z)</option>
                        <option value="brand-asc">Marka (A-Z)</option>
                    </select>
                </div>
            </div>

            <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Ürün Kartları Buraya Eklenecek -->
            </div>
        </main>
    </div>

    <!-- SEPET SAYFASI (CART) -->
    <div id="page-cart" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 hidden">
        <!-- İçerik aynı kaldı, renderCart fonksiyonu dolduruyor -->
        <main>
            <h2 class="text-3xl font-bold mb-8 text-gray-800">Sepetim</h2>
            <div class="flex flex-col lg:flex-row gap-8">
                <div id="cart-items-container" class="lg:w-3/4">
                    <!-- Sepet Ürünleri Buraya Eklenecek -->
                </div>
                
                <div class="lg:w-1/4">
                    <div id="cart-summary" class="bg-white p-6 rounded-xl shadow-xl sticky top-24">
                        <!-- Özet Buraya Eklenecek -->
                    </div>
                </div>
            </div>

            <div id="empty-cart-message" class="hidden text-center py-16 bg-white rounded-xl shadow-xl mt-8">
                <i class="fas fa-shopping-basket text-7xl text-gray-300 mb-6"></i>
                <h3 class="text-2xl font-semibold mb-4 text-gray-700">Sepetinizde henüz ürün bulunmuyor.</h3>
                <a href="#" class="bg-primary hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition nav-link" data-page="home" onclick="scrollToProducts(event)">Hemen Alışverişe Başla</a>
            </div>
        </main>
    </div>

    <!-- İSTEK LİSTESİ SAYFASI (WISHLIST) -->
    <div id="page-wishlist" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 hidden">
        <h2 class="text-3xl font-bold mb-8 text-gray-800 text-center">İstek Listem</h2>
        <div id="wishlist-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
            <!-- İstek Listesi Ürünleri Buraya Eklenecek -->
        </div>
        <div id="empty-wishlist-message" class="hidden text-center py-16 bg-white rounded-xl shadow-xl mt-8">
            <i class="fas fa-heart-broken text-7xl text-gray-300 mb-6"></i>
            <h3 class="text-2xl font-semibold mb-4 text-gray-700">İstek listenizde ürün bulunmuyor.</h3>
            <p class="text-gray-500 mb-6">Beğendiğiniz ürünlerin yanındaki kalp ikonuna tıklayarak buraya ekleyebilirsiniz.</p>
            <a href="#" class="bg-primary hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition nav-link" data-page="home" onclick="scrollToProducts(event)">Ürünleri Keşfet</a>
        </div>
    </div>

    <!-- KULLANICI PROFİLİ SAYFASI (PROFILE) -->
    <div id="page-profile" class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 hidden">
        <main class="bg-white p-8 md:p-10 rounded-xl shadow-2xl">
            <h2 class="text-3xl font-bold mb-6 text-primary border-b pb-3">Hesap Paneli</h2>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Sol: Kişisel Bilgiler -->
                <div class="lg:col-span-1 bg-gray-50 p-6 rounded-lg shadow-inner">
                    <h3 class="text-xl font-bold mb-4 flex items-center text-gray-800"><i class="fas fa-address-card mr-3 text-blue-500"></i> Kişisel Bilgiler</h3>
                    <div id="profile-personal-info" class="space-y-3 text-gray-600">
                        <!-- Bilgiler JS ile doldurulacak -->
                        <p class="font-medium">Ad Soyad: <span id="profile-name-surname" class="font-normal text-gray-700">Bilgi Yok</span></p>
                        <p class="font-medium">T.C. No: <span id="profile-tc" class="font-normal text-gray-700">Bilgi Yok</span></p>
                        <p class="font-medium">E-posta: <span id="profile-email" class="font-normal text-gray-700">Bilgi Yok</span></p>
                        <p class="font-medium">Telefon: <span id="profile-phone" class="font-normal text-gray-700">Bilgi Yok</span></p>
                    </div>
                </div>

                <!-- Sağ: Adres ve Siparişler -->
                <div class="lg:col-span-2">
                    <div class="mb-8 p-6 bg-red-50 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4 flex items-center text-gray-800"><i class="fas fa-map-marker-alt mr-3 text-primary"></i> Kayıtlı Adres</h3>
                        <p id="profile-address-info" class="text-gray-600 pl-1">Adres bilgisi bulunamadı. Lütfen bir sipariş vererek kaydediniz.</p>
                    </div>

                    <h3 class="text-xl font-bold mb-4 flex items-center text-gray-800"><i class="fas fa-box-open mr-3 text-yellow-600"></i> Simüle Edilmiş Siparişlerim</h3>
                    <div id="profile-orders-list" class="space-y-4">
                        <!-- Siparişler JS ile doldurulacak -->
                    </div>
                     <p id="no-orders-message" class="hidden text-center py-8 text-gray-500 bg-gray-100 rounded-lg mt-4">Henüz tamamlanmış bir siparişiniz yok.</p>
                </div>
            </div>
        </main>
    </div>

    <!-- ÖDEME SAYFASI (CHECKOUT) -->
    <div id="page-checkout" class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 hidden">
        <main class="bg-white p-6 md:p-10 rounded-xl shadow-2xl">
            <h2 class="text-3xl font-bold mb-6 text-gray-800">Ödeme İşlemi</h2>

            <!-- Checkout Adımları Navigasyonu -->
            <div id="checkout-steps" class="flex justify-between items-center mb-8 border-b pb-4">
                <!-- Adım 1 -->
                <div class="text-center flex flex-col items-center step-indicator step-1">
                    <div class="w-10 h-10 flex items-center justify-center rounded-full bg-primary text-white font-bold mb-1">1</div>
                    <span class="text-sm font-semibold text-primary mt-1 hidden sm:block">Kimlik & İletişim</span>
                </div>
                <div class="flex-1 h-0.5 bg-gray-200"></div>
                <!-- Adım 2 -->
                <div class="text-center flex flex-col items-center step-indicator step-2">
                    <div class="w-10 h-10 flex items-center justify-center rounded-full border-2 border-gray-300 text-gray-400 font-bold mb-1">2</div>
                    <span class="text-sm font-medium text-gray-400 mt-1 hidden sm:block">Adres Bilgileri</span>
                </div>
                <div class="flex-1 h-0.5 bg-gray-200"></div>
                <!-- Adım 3 -->
                <div class="text-center flex flex-col items-center step-indicator step-3">
                    <div class="w-10 h-10 flex items-center justify-center rounded-full border-2 border-gray-300 text-gray-400 font-bold mb-1">3</div>
                    <span class="text-sm font-medium text-gray-400 mt-1 hidden sm:block">Özet & Onay</span>
                </div>
            </div>

            <form id="checkout-form" onsubmit="event.preventDefault(); return false;">
                <!-- Adım 1: Kişisel ve Kimlik Bilgileri -->
                <div id="step-1" class="checkout-step space-y-4">
                    <h3 class="text-xl font-semibold mb-4 text-gray-700">1. Kişisel ve Kimlik Bilgileri</h3>
                    <p class="text-red-500 text-sm mb-4"><i class="fas fa-exclamation-triangle mr-2"></i> **UYARI: Bu bir simülasyondur.** Girilen T.C. Kimlik No gibi bilgiler saklanmaz.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <input type="text" id="checkout-name" placeholder="Adınız" class="form-input p-3 border border-gray-300 rounded-lg w-full focus:border-primary focus:ring-primary" required>
                            <p id="error-name" class="text-red-500 text-xs mt-1 hidden">Lütfen adınızı giriniz.</p>
                        </div>
                        <div>
                            <input type="text" id="checkout-surname" placeholder="Soyadınız" class="form-input p-3 border border-gray-300 rounded-lg w-full focus:border-primary focus:ring-primary" required>
                             <p id="error-surname" class="text-red-500 text-xs mt-1 hidden">Lütfen soyadınızı giriniz.</p>
                        </div>
                    </div>
                    
                    <div>
                        <input type="text" id="checkout-tc" placeholder="T.C. Kimlik Numaranız (Simulasyon)" pattern="\d{11}" minlength="11" maxlength="11" class="form-input p-3 border border-gray-300 rounded-lg w-full focus:border-primary focus:ring-primary" required title="Lütfen 11 haneli T.C. Kimlik numaranızı giriniz.">
                        <p id="error-tc" class="text-red-500 text-xs mt-1 hidden">Lütfen 11 haneli T.C. kimlik numarasını giriniz.</p>
                    </div>

                    <input type="email" id="checkout-email" placeholder="E-posta Adresiniz" class="form-input p-3 border border-gray-300 rounded-lg w-full focus:border-primary focus:ring-primary" required>
                    <input type="tel" id="checkout-phone" placeholder="Telefon Numaranız" class="form-input p-3 border border-gray-300 rounded-lg w-full focus:border-primary focus:ring-primary" required>

                    <button type="button" onclick="nextStep()" class="w-full bg-primary hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 mt-4">
                        Adres Bilgilerine Geç <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>

                <!-- Adım 2: Adres Bilgileri -->
                <div id="step-2" class="checkout-step space-y-4 hidden">
                    <h3 class="text-xl font-semibold mb-4 text-gray-700">2. Adres Bilgileri</h3>
                    
                    <input type="text" id="checkout-address-title" placeholder="Adres Başlığı (Ev/İş)" class="form-input p-3 border border-gray-300 rounded-lg w-full focus:border-primary focus:ring-primary" required>
                    
                    <textarea id="checkout-street" placeholder="Açık Adres (Cadde, Sokak, No)" rows="3" class="form-input p-3 border border-gray-300 rounded-lg w-full focus:border-primary focus:ring-primary resize-none" required></textarea>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <input type="text" id="checkout-city" placeholder="Şehir" class="form-input p-3 border border-gray-300 rounded-lg w-full focus:border-primary focus:ring-primary" required>
                        <input type="text" id="checkout-district" placeholder="İlçe" class="form-input p-3 border border-gray-300 rounded-lg w-full focus:border-primary focus:ring-primary" required>
                        <input type="text" id="checkout-zip" placeholder="Posta Kodu" pattern="\d{5}" minlength="5" maxlength="5" class="form-input p-3 border border-gray-300 rounded-lg w-full focus:border-primary focus:ring-primary" required title="Lütfen 5 haneli posta kodunu giriniz.">
                    </div>

                    <div class="flex justify-between gap-4 mt-6">
                        <button type="button" onclick="prevStep()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-lg shadow-md transition duration-300">
                            <i class="fas fa-arrow-left mr-2"></i> Geri
                        </button>
                        <button type="button" onclick="nextStep()" class="flex-1 bg-primary hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300">
                            Ödeme Özeti <i class="fas fa-file-invoice-dollar ml-2"></i>
                        </button>
                    </div>
                </div>

                <!-- Adım 3: Ödeme Özeti ve Onay -->
                <div id="step-3" class="checkout-step hidden">
                    <h3 class="text-xl font-semibold mb-4 text-gray-700">3. Ödeme Özeti ve Onay</h3>

                    <!-- Kişi Bilgileri Özeti -->
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 mb-6">
                        <h4 class="font-bold text-lg mb-2 text-gray-800">Teslimat Bilgileri</h4>
                        <p id="summary-personal" class="text-sm text-gray-600 mb-2"></p>
                        <p id="summary-address" class="text-sm text-gray-600"></p>
                    </div>

                    <!-- Sepet Özeti (Tekrar Kullanılıyor) -->
                    <div id="checkout-summary-container" class="mb-6">
                        <h4 class="font-bold text-lg mb-3 text-gray-800 border-b pb-2">Sipariş Detayı</h4>
                        <!-- Cart summary will be rendered here -->
                    </div>

                    <!-- Ödeme Yöntemi Simulasyonu -->
                    <div class="mb-6">
                        <label class="block font-bold text-gray-800 mb-2">Ödeme Yöntemi Seçin (Simulasyon)</label>
                        <select id="payment-method" class="form-input p-3 border border-gray-300 rounded-lg w-full focus:border-primary focus:ring-primary" required>
                            <option value="kredi">Kredi Kartı / Banka Kartı</option>
                            <option value="kapida">Kapıda Ödeme</option>
                            <option value="havale">Banka Havalesi</option>
                        </select>
                    </div>

                    <div class="flex justify-between gap-4 mt-6">
                        <button type="button" onclick="prevStep()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 px-6 rounded-lg shadow-md transition duration-300">
                            <i class="fas fa-arrow-left mr-2"></i> Adres Değiştir
                        </button>
                        <button type="button" onclick="completePurchase()" class="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300">
                            <i class="fas fa-check-circle mr-2"></i> Siparişi Tamamla
                        </button>
                    </div>
                </div>
            </form>
        </main>
    </div>

    <!-- HAKKIMIZDA SAYFASI (ABOUT) -->
    <div id="page-about" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 hidden">
        <main class="bg-white p-8 md:p-12 rounded-xl shadow-2xl">
            <h2 class="text-4xl font-extrabold text-center text-primary mb-4">X.X Giyim | Hikayemiz</h2>
            <p class="text-gray-600 max-w-4xl mx-auto mb-12 text-lg leading-relaxed text-center border-b pb-6">
                X.X Giyim, 2025'te moda tutkunu bir ekip tarafından, sadece giysi satmak değil, bir yaşam tarzı sunmak hedefiyle kuruldu. İnanıyoruz ki stil, sadece dış görünüş değil, aynı zamanda güven ve ifade biçimidir. Sürdürülebilir, kaliteli ve ulaşılabilir modayı herkesle buluşturmak için çalışıyoruz.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                <!-- Vizyon -->
                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 shadow-lg flex flex-col items-center text-center transition duration-300 hover:shadow-xl hover:bg-red-50">
                    <i class="fas fa-bullseye text-5xl text-red-500 mb-4"></i>
                    <h4 class="text-2xl font-bold mb-3 text-gray-800">Vizyonumuz</h4>
                    <p class="text-sm text-gray-600">Global moda sahnesinde Türkiye'nin öncü, yenilikçi ve sürdürülebilirlik odaklı markası olmak.</p>
                </div>
                <!-- Misyon -->
                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 shadow-lg flex flex-col items-center text-center transition duration-300 hover:shadow-xl hover:bg-red-50">
                    <i class="fas fa-hands-helping text-5xl text-green-600 mb-4"></i>
                    <h4 class="text-2xl font-bold mb-3 text-gray-800">Misyonumuz</h4>
                    <p class="text-sm text-gray-600">Yüksek kaliteli malzemeler ve etik üretim yöntemleriyle tasarlanmış, her bireyin kendini özgürce ifade edebileceği ürünler sunmak.</p>
                </div>
                <!-- Değerler -->
                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 shadow-lg flex flex-col items-center text-center transition duration-300 hover:shadow-xl hover:bg-red-50">
                    <i class="fas fa-check-double text-5xl text-blue-500 mb-4"></i>
                    <h4 class="text-2xl font-bold mb-3 text-gray-800">Değerlerimiz</h4>
                    <p class="text-sm text-gray-600">Kalite, Şeffaflık, Sürdürülebilirlik ve Koşulsuz Müşteri Mutluluğu.</p>
                </div>
            </div>

            <!-- İletişim Bölümü (Ekstra Bilgi) -->
            <div class="mt-16 text-center bg-primary p-8 rounded-xl text-white shadow-inner">
                <h3 class="text-3xl font-bold mb-4">Bize Ulaşın</h3>
                <p class="text-lg">Sorularınız, iş birlikleriniz veya geri bildirimleriniz için her zaman buradayız.</p>
                <p class="text-xl font-semibold mt-4"><i class="fas fa-envelope mr-2"></i> info@xxgiyim.com</p>
            </div>
        </main>
    </div>

    <!-- ÜRÜN DETAY MODALI (PRODUCT MODAL) -->
    <div id="product-modal" class="modal hidden fixed inset-0 flex items-center justify-center p-4" onclick="if (event.target == this) this.style.display = 'none';">
        <div class="bg-white p-8 rounded-xl shadow-2xl max-w-4xl w-full flex flex-col md:flex-row gap-8 relative animate-in zoom-in duration-300">
            <span class="close-btn absolute top-4 right-6 text-3xl text-gray-400 hover:text-primary cursor-pointer transition">&times;</span>
            
            <img id="modal-img" src="" alt="Ürün Resmi" class="modal-img w-full md:w-1/2 h-80 object-cover rounded-lg shadow-lg">
            
            <div class="modal-details flex-1">
                <span id="modal-brand" class="text-sm text-gray-500 font-medium uppercase tracking-wider">Marka</span>
                <h2 id="modal-name" class="text-3xl font-bold text-gray-800 mb-2">Ürün Adı</h2>
                <p id="modal-price" class="text-3xl font-extrabold text-primary mb-6">Fiyat</p>
                <p class="text-gray-600 mb-6 leading-relaxed">Bu ürün, yüksek kaliteli kumaştan üretilmiştir ve modern kesimi ile gün boyu konfor sağlar. Gardırobunuzun vazgeçilmezi olacak.</p>
                
                <div class="mb-8 flex items-center justify-between">
                    <div>
                        <label for="modal-size" class="block font-semibold mb-2 text-gray-700">Beden Seç:</label>
                        <select id="modal-size" class="w-full md:w-auto py-2 px-4 border border-gray-300 rounded-lg bg-white cursor-pointer focus:ring-primary focus:border-primary transition">
                            <option value="M">M (Medium)</option>
                        </select>
                    </div>
                    <!-- YENİ: Modal İçinde İstek Listesi Butonu -->
                    <button id="modal-wishlist-btn" class="text-4xl text-gray-300 hover:text-red-500 transition-colors">
                         <i class="fas fa-heart"></i>
                    </button>
                </div>
                
                <button id="modal-add-to-cart-btn" class="w-full bg-primary hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition duration-300 ease-in-out transform hover:scale-[1.01]">
                    <i class="fas fa-shopping-bag mr-2"></i> Sepete Ekle
                </button>
            </div>
        </div>
    </div>
    
    <!-- TOAST BİLDİRİMİ -->
    <div id="toast" class="fixed bottom-8 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-xl shadow-2xl opacity-0 transition-opacity duration-300 pointer-events-none"></div>

    <!-- SİPARİŞ BAŞARILI MODALI (SUCCESS MODAL) -->
    <div id="success-modal" class="modal hidden fixed inset-0 flex items-center justify-center p-4">
        <div class="bg-white p-8 rounded-xl shadow-2xl max-w-md w-full text-center relative animate-in zoom-in duration-500">
            <i class="fas fa-check-circle text-7xl text-green-500 mb-4"></i>
            <h2 class="text-2xl font-bold text-gray-800 mb-3">Siparişiniz Başarıyla Alınmıştır!</h2>
            <p class="text-gray-600 mb-6">Siparişiniz işleme alınmıştır. E-posta adresinize detaylı bilgi gönderilecektir.</p>
            <button onclick="window.location.reload();" class="w-full bg-primary hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300">
                Ana Sayfaya Dön
            </button>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="bg-gray-900 text-white py-12 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 border-b border-gray-700 pb-8 mb-8">
                <div>
                    <h4 class="text-xl font-bold mb-4 border-b-2 border-primary pb-2 inline-block">X.X Giyim</h4>
                    <p class="text-sm text-gray-400">Moda, kalite ve müşteri memnuniyetini bir araya getiriyoruz.</p>
                    <div class="mt-4 flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-primary transition"><i class="fab fa-instagram text-xl"></i></a>
                        <a href="#" class="text-gray-400 hover:text-primary transition"><i class="fab fa-facebook-f text-xl"></i></a>
                        <a href="#" class="text-gray-400 hover:text-primary transition"><i class="fab fa-twitter text-xl"></i></a>
                    </div>
                </div>
                <div>
                    <h4 class="text-xl font-bold mb-4 border-b-2 border-primary pb-2 inline-block">Kurumsal</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Gizlilik Politikası</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Kullanım Koşulları</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">İletişim</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-xl font-bold mb-4 border-b-2 border-primary pb-2 inline-block">Yardım</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Sıkça Sorulan Sorular</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Kargo Takibi</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">İade ve Değişim</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-xl font-bold mb-4 border-b-2 border-primary pb-2 inline-block">İletişim</h4>
                    <p class="text-sm text-gray-400">Destek hattı: +90 555 123 45 67</p>
                    <p class="text-sm text-gray-400 mt-2">E-posta: info@xxgiyim.com</p>
                </div>
            </div>
            <div class="text-center">
                <p class="text-sm text-gray-500">&copy; 2025 X.X Giyim. Tüm Hakları Saklıdır.</p>
            </div>
        </div>
    </footer>


    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // === VERİ YAPISI (PRODUCTS, CART, WISHLIST, CHECKOUT) ===
            const userProducts = [
                // 50 Adet Ürün Verisi (Aynı Kaldı)
                { id: 1, name: 'Grafik Baskılı Beyaz T-Shirt', brand: 'Urban Threads', price: '499 TL', imageUrl: 'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=500&auto=format&fit=crop&q=60' },
                { id: 2, name: 'Yırtık Mavi Mom Jean', brand: 'Denim Co.', price: '899 TL', imageUrl: 'https://images.unsplash.com/photo-1604176354204-9268737828e4?w=500&auto=format&fit=crop&q=60' },
                { id: 3, name: 'Siyah Deri Ceket', brand: 'Rebel Style', price: '2.499 TL', imageUrl: 'https://images.unsplash.com/photo-1521223890158-f9f7c3d5d504?w=500&auto=format&fit=crop&q=60' },
                { id: 4, name: 'Bej Rengi Kapüşonlu Sweatshirt', brand: 'Comfort Zone', price: '749 TL', imageUrl: 'https://images.unsplash.com/photo-1556108343-dd5d7a659a28?w=500&auto=format&fit=crop&q=60' },
                { id: 5, name: 'Çiçek Desenli Yazlık Elbise', brand: 'Summer Bloom', price: '999 TL', imageUrl: 'https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?w=500&auto=format&fit=crop&q=60' },
                { id: 6, name: 'Klasik Beyaz Sneaker', brand: 'StreetWalk', price: '1.299 TL', imageUrl: 'https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?w=500&auto=format&fit=crop&q=60' },
                { id: 7, name: 'Gri Yün Kaşkol', brand: 'Warm Hugs', price: '349 TL', imageUrl: 'https://images.unsplash.com/photo-1609244432141-25585b4f6215?w=500&auto=format&fit=crop&q=60' },
                { id: 8, name: 'Siyah Kargo Pantolon', brand: 'Urban Threads', price: '950 TL', imageUrl: 'https://images.unsplash.com/photo-1624312899458-293c683884c0?w=500&auto=format&fit=crop&q=60' },
                { id: 9, name: 'Vintage Kot Ceket', brand: 'Denim Co.', price: '1.199 TL', imageUrl: 'https://images.unsplash.com/photo-1543087903-1ac2378a9667?w=500&auto=format&fit=crop&q=60' },
                { id: 10, name: 'Bordo Balıkçı Yaka Kazak', brand: 'Cozy Knits', price: '699 TL', imageUrl: 'https://images.unsplash.com/photo-1616852061623-1c0079361a66?w=500&auto=format&fit=crop&q=60' },
                { id: 11, name: 'Yeşil Bomber Ceket', brand: 'Airborne Style', price: '1.350 TL', imageUrl: 'https://images.unsplash.com/photo-1591047139829-d916bb69a6c3?w=500&auto=format&fit=crop&q=60' },
                { id: 12, name: 'Ekose Desenli Gömlek', brand: 'Lumberjack', price: '599 TL', imageUrl: 'https://images.unsplash.com/photo-1589938833917-a0656a4b1fd7?w=500&auto=format&fit=crop&q=60' },
                { id: 13, name: 'Siyah Tayt', brand: 'FlexFit', price: '450 TL', imageUrl: 'https://images.unsplash.com/photo-1596793529329-1502c2d471e4?w=500&auto=format&fit=crop&q=60' },
                { id: 14, name: 'Deri Bot', brand: 'Trekker', price: '1.899 TL', imageUrl: 'https://images.unsplash.com/photo-1608256246200-53e6358b1d2b?w=500&auto=format&fit=crop&q=60' },
                { id: 15, name: 'Mavi Çizgili Gömlek', brand: 'Nautical', price: '650 TL', imageUrl: 'https://images.unsplash.com/photo-1603252109303-2751441dd157?w=500&auto=format&fit=crop&q=60' },
                { id: 16, name: 'Siyah Kanvas Çanta', brand: 'CarryAll', price: '550 TL', imageUrl: 'https://images.unsplash.com/photo-1566150905458-1bf1f2997d0d?w=500&auto=format&fit=crop&q=60' },
                { id: 17, name: 'Krem Rengi Keten Pantolon', brand: 'Breeze', price: '850 TL', imageUrl: 'https://images.unsplash.com/photo-1602293589922-b91a13b65289?w=500&auto=format&fit=crop&q=60' },
                { id: 18, name: 'Hardal Rengi Bere', brand: 'Warm Hugs', price: '299 TL', imageUrl: 'https://images.unsplash.com/photo-1576426863848-c21f68c6aa98?w=500&auto=format&fit=crop&q=60' },
                { id: 19, name: 'Lacivert Blazer Ceket', brand: 'Prestige', price: '1.750 TL', imageUrl: 'https://images.unsplash.com/photo-1593030103065-b0b216c52a3a?w=500&auto=format&fit=crop&q=60' },
                { id: 20, name: 'Siyah Skinny Jean', brand: 'Denim Co.', price: '899 TL', imageUrl: 'https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=500&auto=format&fit=crop&q=60' },
                { id: 21, name: 'Beyaz Polo Yaka T-Shirt', brand: 'Classic Wear', price: '529 TL', imageUrl: 'https://images.unsplash.com/photo-1574281358988-34f8a3770f17?w=500&auto=format&fit=crop&q=60' },
                { id: 22, name: 'Gri Eşofman Altı', brand: 'Comfort Zone', price: '649 TL', imageUrl: 'https://images.unsplash.com/photo-1563278832-61584c39f1a2?w=500&auto=format&fit=crop&q=60' },
                { id: 23, name: 'Kırmızı Puantiyeli Elbise', brand: 'Retro Vibes', price: '999 TL', imageUrl: 'https://images.unsplash.com/photo-1616191993213-c827c83f3438?w=500&auto=format&fit=crop&q=60' },
                { id: 24, name: 'Asker Yeşili Parka', brand: 'Trekker', price: '2.199 TL', imageUrl: 'https://images.unsplash.com/photo-151543454-da486a43a20a?w=500&auto=format&fit=crop&q=60' },
                { id: 25, name: 'Renkli Çorap Seti', brand: 'Happy Feet', price: '249 TL', imageUrl: 'https://images.unsplash.com/photo-1610652489901-4bada9f518e0?w=500&auto=format&fit=crop&q=60' },
                { id: 26, name: 'Siyah Kumaş Pantolon', brand: 'Prestige', price: '999 TL', imageUrl: 'https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?w=500&auto=format&fit=crop&q=60' },
                { id: 27, name: 'Güneş Gözlüğü', brand: 'Shadez', price: '799 TL', imageUrl: 'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=500&auto=format&fit=crop&q=60' },
                { id: 28, name: 'Kısa Kollu Çiçekli Gömlek', brand: 'Aloha', price: '580 TL', imageUrl: 'https://images.unsplash.com/photo-1593976695280-3796d1945a27?w=500&auto=format&fit=crop&q=60' },
                { id: 29, name: 'Deri Kemer', brand: 'Buckle Up', price: '420 TL', imageUrl: 'https://images.unsplash.com/photo-1585728748176-76a147427218?w=500&auto=format&fit=crop&q=60' },
                { id: 30, name: 'Pembe Örgü Hırka', brand: 'Cozy Knits', price: '850 TL', imageUrl: 'https://images.unsplash.com/photo-1620799140408-edc6dcb6d633?w=500&auto=format&fit=crop&q=60' },
                { id: 31, name: 'Kot Şort', brand: 'Denim Co.', price: '600 TL', imageUrl: 'https://images.unsplash.com/photo-1591357284278-6e4a22c54c30?w=500&auto=format&fit=crop&q=60' },
                { id: 32, name: 'Siyah Spor Sütyeni', brand: 'FlexFit', price: '380 TL', imageUrl: 'https://images.unsplash.com/photo-1571551132513-23a5e8499256?w=500&auto=format&fit=crop&q=60' },
                { id: 33, name: 'Beyzbol Şapkası', brand: 'Headwear', price: '300 TL', imageUrl: 'https://images.unsplash.com/photo-1588850561407-ed2783e53527?w=500&auto=format&fit=crop&q=60' },
                { id: 34, name: 'Beyaz Basic T-Shirt', brand: 'Essentials', price: '350 TL', imageUrl: 'https://images.unsplash.com/photo-1583743814966-8936f5b7be1a?w=500&auto=format&fit=crop&q=60' },
                { id: 35, name: 'Gri Yün Palto', brand: 'Prestige', price: '2.999 TL', imageUrl: 'https://images.unsplash.com/photo-1579572331145-5e5658331a8c?w=500&auto=format&fit=crop&q=60' },
                { id: 36, name: 'Sarı Yağmurluk', brand: 'AquaShield', price: '1.200 TL', imageUrl: 'https://images.unsplash.com/photo-1552417734-94943a4111ac?w=500&auto=format&fit=crop&q=60' },
                { id: 37, name: 'Zeytin Yeşili Gömlek', brand: 'Urban Threads', price: '620 TL', imageUrl: 'https://images.unsplash.com/photo-1622445275868-9f3b5a725127?w=500&auto=format&fit=crop&q=60' },
                { id: 38, name: 'Yüksek Bel Kumaş Pantolon', brand: 'Elegance', price: '950 TL', imageUrl: 'https://images.unsplash.com/photo-1529391409740-59f2cea08bc0?w=500&auto=format&fit=crop&q=60' },
                { id: 39, name: 'Desenli Fular', brand: 'Silk Touch', price: '320 TL', imageUrl: 'https://images.unsplash.com/photo-1529374255404-311a2a4f1fd9?w=500&auto=format&fit=crop&q=60' },
                { id: 40, name: 'Kırmızı Yüksek Topuklu Ayakkabı', brand: 'Stiletto', price: '1.400 TL', imageUrl: 'https://images.unsplash.com/photo-1590256294324-367d38341b5a?w=500&auto=format&fit=crop&q=60' },
                { id: 41, name: 'Sırt Çantası', brand: 'Urban Packer', price: '899 TL', imageUrl: 'https://images.unsplash.com/photo-1553062407-98eeb6e0e5c8?w=500&auto=format&fit=crop&q=60' },
                { id: 42, name: 'Metal Grisi Saat', brand: 'Timekeeper', price: '2.500 TL', imageUrl: 'https://images.unsplash.com/photo-1524805444758-089113d48a6d?w=500&auto=format&fit=crop&q=60' },
                { id: 43, name: 'Mavi Şişme Yelek', brand: 'Airborne Style', price: '999 TL', imageUrl: 'https://images.unsplash.com/photo-1601822851171-88339b6b7a5e?w=500&auto=format&fit=crop&q=60' },
                { id: 44, name: 'Kadife Elbise', brand: 'Velvet Night', price: '1.300 TL', imageUrl: 'https://images.unsplash.com/photo-1617922001434-c7a435bd8429?w=500&auto=format&fit=crop&q=60' },
                { id: 45, name: 'Hasır Şapka', brand: 'Sun Kissed', price: '450 TL', imageUrl: 'https://images.unsplash.com/photo-1530518118318-6f6a27e7a5a4?w=500&auto=format&fit=crop&q=60' },
                { id: 46, name: 'Siyah Külotlu Çorap', brand: 'Sheer', price: '150 TL', imageUrl: 'https://images.unsplash.com/photo-1584969248238-6f595357879e?w=500&auto=format&fit=crop&q=60' },
                { id: 47, name: 'Beyaz Keten Gömlek', brand: 'Breeze', price: '750 TL', imageUrl: 'https://images.unsplash.com/photo-1622554199189-d97159074a1e?w=500&auto=format&fit=crop&q=60' },
                { id: 48, name: 'Kot Etek', brand: 'Denim Co.', price: '680 TL', imageUrl: 'https://images.unsplash.com/photo-1551232864-3f0890e580d9?w=500&auto=format&fit=crop&q=60' },
                { id: 49, name: 'Kahverengi Süet Ceket', brand: 'Western', price: '1.950 TL', imageUrl: 'https://images.unsplash.com/photo-1612154348512-defb3e390639?w=500&auto=format&fit=crop&q=60' },
                { id: 50, name: 'Baskılı Müzik Grubu T-Shirt', brand: 'Band Tees', price: '550 TL', imageUrl: 'https://images.unsplash.com/photo-1618354691373-d851c5c3a990?w=500&auto=format&fit=crop&q=60' }
            ];

            const products = userProducts.map(product => {
                const numericPrice = parseFloat(product.price.replace(/\./g, '').replace(' TL', '').trim());
                return {
                    ...product,
                    price: numericPrice,
                    // Tüm bedenler için stok ekleniyor
                    stock: { 'S': 5, 'M': 10, 'L': 7, 'XL': 3 } 
                };
            });

            // Tarayıcı hafızasından state'leri yükle
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            let wishlist = JSON.parse(localStorage.getItem('wishlist')) || []; // YENİ: İstek Listesi
            let checkoutData = JSON.parse(localStorage.getItem('checkoutData')) || {}; // YENİ: Kullanıcı bilgileri
            let simulatedOrders = JSON.parse(localStorage.getItem('simulatedOrders')) || []; // YENİ: Simüle Siparişler
            
            // Checkout Form Verileri ve Adım Sayacı
            let currentStep = 1;


            // === ELEMENTLERİ SEÇME ===
            const productListContainer = document.getElementById('product-list');
            const cartCountElement = document.getElementById('cart-count');
            const wishlistCountElement = document.getElementById('wishlist-count'); // YENİ
            const productSearchInput = document.getElementById('product-search');
            const brandFilterSelect = document.getElementById('brand-filter');
            const sortBySelect = document.getElementById('sort-by'); // YENİ
            const pages = {
                home: document.getElementById('page-home'),
                cart: document.getElementById('page-cart'),
                about: document.getElementById('page-about'),
                checkout: document.getElementById('page-checkout'),
                wishlist: document.getElementById('page-wishlist'), // YENİ
                profile: document.getElementById('page-profile') // YENİ
            };
            const navLinks = document.querySelectorAll('.nav-link');
            const modal = document.getElementById('product-modal');
            const closeModalBtn = document.querySelector('.close-btn');
            const toast = document.getElementById('toast');
            
            // Mevcut sayfanın state'i
            let currentPage = 'home';

            // === FONSİYONLAR ===

            // Dinamik Başlık Güncelleme
            const updateTitle = (pageName) => {
                let title = 'X.X Giyim - ';
                switch (pageName) {
                    case 'home': title += 'Tarzını Keşfet'; break;
                    case 'cart': title += 'Sepetim'; break;
                    case 'about': title += 'Hakkımızda'; break;
                    case 'checkout': title += 'Ödeme'; break;
                    case 'wishlist': title += 'İstek Listem'; break; // YENİ
                    case 'profile': title += 'Hesap Paneli'; break; // YENİ
                    default: title += 'Alışveriş';
                }
                document.title = title;
            }

            // Toast Notification Fonksiyonu
            const showToast = (message) => {
                toast.textContent = message;
                toast.classList.add("opacity-100");
                toast.classList.remove("opacity-0");
                setTimeout(function(){ 
                    toast.classList.remove("opacity-100");
                    toast.classList.add("opacity-0");
                }, 3000);
            }

            // Scroll to Products için Helper
            window.scrollToProducts = (e) => {
                e.preventDefault();
                showPage('home');
                setTimeout(() => {
                    const mainContent = document.getElementById('main-content');
                    if (mainContent) {
                        mainContent.scrollIntoView({ behavior: 'smooth' });
                    }
                }, 10);
            }

            // Sayfa Navigasyonu
            const showPage = (pageName) => {
                currentPage = pageName;
                Object.values(pages).forEach(page => page.classList.add('hidden'));
                if (pages[pageName]) {
                    pages[pageName].classList.remove('hidden');
                }
                updateTitle(pageName);
                window.scrollTo(0, 0);

                // Sayfaya özel render fonksiyonları
                if(pageName === 'cart') renderCart();
                if(pageName === 'wishlist') renderWishlist(); // YENİ
                if(pageName === 'profile') renderProfile(); // YENİ
            };

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    if (link.dataset.page === 'home' && link.getAttribute('href') === '#products') {
                        return;
                    }
                    e.preventDefault();
                    const pageName = link.dataset.page;
                    if (pageName) {
                        showPage(pageName);
                    }
                });
            });

            // Markaları Filtreye Yükleme
            const loadBrandFilters = () => {
                const brands = [...new Set(products.map(p => p.brand))].sort();
                brands.forEach(brand => {
                    const option = document.createElement('option');
                    option.value = brand;
                    option.textContent = brand;
                    brandFilterSelect.appendChild(option);
                });
            }
            
            // Ürün Sıralama Fonksiyonu (YENİ)
            const sortProducts = (productsToSort, sortType) => {
                switch (sortType) {
                    case 'price-asc':
                        return productsToSort.sort((a, b) => a.price - b.price);
                    case 'price-desc':
                        return productsToSort.sort((a, b) => b.price - a.price);
                    case 'name-asc':
                        return productsToSort.sort((a, b) => a.name.localeCompare(b.name));
                    case 'brand-asc':
                        return productsToSort.sort((a, b) => a.brand.localeCompare(b.brand));
                    case 'default':
                    default:
                        // ID'ye göre varsayılan sıralama
                        return productsToSort.sort((a, b) => a.id - b.id);
                }
            };


            // Ürünleri Listeleme ve Filtreleme
            const renderProducts = () => {
                const searchTerm = productSearchInput.value.toLowerCase().trim();
                const selectedBrand = brandFilterSelect.value;
                const sortBy = sortBySelect.value; // YENİ: Sıralama değeri

                let filteredProducts = products.filter(product => {
                    const matchesSearch = product.name.toLowerCase().includes(searchTerm) || product.brand.toLowerCase().includes(searchTerm);
                    const matchesBrand = selectedBrand === "" || product.brand === selectedBrand;
                    return matchesSearch && matchesBrand;
                });
                
                // Sıralama Uygula
                filteredProducts = sortProducts(filteredProducts, sortBy);

                productListContainer.innerHTML = '';
                if (filteredProducts.length === 0) {
                    productListContainer.innerHTML = `<p class="col-span-full text-center py-12 text-gray-500 text-lg">Aradığınız kriterlere uygun ürün bulunamadı.</p>`;
                    return;
                }

                filteredProducts.forEach(product => {
                    const isWishlisted = wishlist.includes(product.id); // İstek listesinde mi?
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card bg-white rounded-xl shadow-lg overflow-hidden transition duration-300 ease-in-out hover:shadow-2xl hover:-translate-y-1 group relative';
                    productCard.dataset.productId = product.id;
                    
                    productCard.innerHTML = `
                        <!-- Wishlist Butonu -->
                        <button class="toggle-wishlist absolute top-4 right-4 z-10 p-2 rounded-full bg-white bg-opacity-70 hover:bg-opacity-100 transition shadow-md ${isWishlisted ? 'wishlist-btn-active' : ''}" 
                                data-product-id="${product.id}">
                            <i class="fas fa-heart text-xl ${isWishlisted ? 'text-red-500' : 'text-gray-400'}"></i>
                        </button>

                        <div class="cursor-pointer" onclick="openProductModal(${product.id})">
                            <img src="${product.imageUrl}" alt="${product.name}" class="product-image w-full h-80 object-cover transition-transform duration-500">
                            <div class="p-5 flex flex-col h-auto">
                                <span class="text-xs font-semibold uppercase text-gray-500 mb-1">${product.brand}</span>
                                <h3 class="text-lg font-bold text-gray-800 mb-auto">${product.name}</h3>
                                <p class="text-xl font-extrabold text-primary mt-3">${product.price.toLocaleString('tr-TR', { minimumFractionDigits: 2 })} TL</p>
                            </div>
                        </div>
                    `;
                    productListContainer.appendChild(productCard);
                });
                
                // Yeni wishlist butonlarına dinleyici ekle
                document.querySelectorAll('.toggle-wishlist').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation(); // Kartın modal açmasını engelle
                        const id = parseInt(e.currentTarget.dataset.productId);
                        toggleWishlist(id);
                    });
                });
            };

            // Arama, Filtre ve Sıralama Dinleyicileri
            productSearchInput.addEventListener('input', renderProducts);
            brandFilterSelect.addEventListener('change', renderProducts);
            sortBySelect.addEventListener('change', renderProducts); // YENİ
            
            // Ürün Detay Modalı
            const openProductModal = (productId) => {
                const product = products.find(p => p.id === productId);
                if (!product) return;

                const isWishlisted = wishlist.includes(product.id);

                document.getElementById('modal-img').src = product.imageUrl;
                document.getElementById('modal-brand').textContent = product.brand;
                document.getElementById('modal-name').textContent = product.name;
                document.getElementById('modal-price').textContent = `${product.price.toLocaleString('tr-TR', { minimumFractionDigits: 2 })} TL`;
                
                // İstek Listesi Butonunu Güncelle
                const modalWishlistBtn = document.getElementById('modal-wishlist-btn');
                modalWishlistBtn.classList.toggle('wishlist-btn-active', isWishlisted);
                modalWishlistBtn.querySelector('i').classList.toggle('text-red-500', isWishlisted);
                modalWishlistBtn.querySelector('i').classList.toggle('text-gray-400', !isWishlisted);
                modalWishlistBtn.onclick = () => toggleWishlist(product.id);

                
                const sizeSelect = document.getElementById('modal-size');
                sizeSelect.innerHTML = '';
                
                let firstAvailableSize = null;

                Object.keys(product.stock).forEach(size => {
                    const stockCount = product.stock[size];
                    const option = document.createElement('option');
                    option.value = size;
                    option.textContent = `${size} (${stockCount > 0 ? stockCount + ' adet kaldı' : 'Stok Tükendi'})`;
                    option.disabled = stockCount === 0;

                    if (stockCount > 0 && firstAvailableSize === null) {
                        firstAvailableSize = size;
                    }
                    
                    sizeSelect.appendChild(option);
                });

                if (firstAvailableSize) {
                    sizeSelect.value = firstAvailableSize;
                }

                const addToCartBtn = document.getElementById('modal-add-to-cart-btn');
                addToCartBtn.classList.toggle('opacity-50', !firstAvailableSize);
                addToCartBtn.disabled = !firstAvailableSize;

                addToCartBtn.onclick = () => {
                    const selectedSize = sizeSelect.value;
                    if (product.stock[selectedSize] > 0) {
                        addToCart(product.id, selectedSize);
                        modal.classList.add('hidden');
                    } else {
                        showToast("Seçilen beden stokta yok!");
                    }
                };
                
                modal.classList.remove('hidden');
            };
            
            closeModalBtn.onclick = () => modal.classList.add('hidden');
            window.onclick = (event) => {
                if (event.target == modal) modal.classList.add('hidden');
            };

            // === SEPET İŞLEMLERİ ===

            const updateCartCount = () => {
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                cartCountElement.textContent = totalItems;
            };

            const saveCart = () => {
                localStorage.setItem('cart', JSON.stringify(cart));
            };

            const addToCart = (productId, size = 'M') => {
                const existingItem = cart.find(item => item.id === productId && item.size === size);
                const product = products.find(p => p.id === productId);

                if (existingItem && existingItem.quantity >= product.stock[size]) {
                     showToast(`${product.name} (${size}) için maksimum stok adedine ulaştınız!`);
                     return;
                }

                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ id: productId, quantity: 1, size: size });
                }
                
                saveCart();
                updateCartCount();
                showToast(`"${product.name}" (${size}) sepete eklendi!`);
            };

            const removeFromCart = (productId, size) => {
                cart = cart.filter(item => !(item.id === productId && item.size === size));
                saveCart();
                renderCart();
            };

            const updateQuantity = (productId, size, newQuantity) => {
                const item = cart.find(item => item.id === productId && item.size === size);
                const product = products.find(p => p.id === productId);

                if (item) {
                    let quantity = parseInt(newQuantity);
                    const maxStock = product.stock[size];
                    
                    if (isNaN(quantity) || quantity < 1) {
                         removeFromCart(productId, size);
                         showToast("Ürün sepetten kaldırıldı.");
                         return;
                    }
                    
                    if (quantity > maxStock) {
                        showToast(`Maksimum stok adedi ${maxStock}!`);
                        quantity = maxStock;
                    }

                    item.quantity = quantity;

                    saveCart();
                    renderCart();
                }
            };
            
            // Sepet Sayfasını Oluşturma
            const renderCart = () => {
                const cartContainer = document.getElementById('cart-items-container');
                const cartSummaryContainer = document.getElementById('cart-summary');
                const emptyCartMsg = document.getElementById('empty-cart-message');
                
                cartContainer.innerHTML = '';
                updateCartCount();

                if (cart.length === 0) {
                    emptyCartMsg.classList.remove('hidden');
                    cartSummaryContainer.classList.add('hidden');
                    return;
                }
                
                emptyCartMsg.classList.add('hidden');
                cartSummaryContainer.classList.remove('hidden');

                let subtotal = 0;
                
                cart.forEach(cartItem => {
                    const product = products.find(p => p.id === cartItem.id);
                    if (!product) return;
                    
                    subtotal += product.price * cartItem.quantity;
                    
                    const maxStock = product.stock[cartItem.size];
                    const isMax = cartItem.quantity >= maxStock;
                    const uniqueId = `${product.id}-${cartItem.size}`; 
                    
                    const cartItemElement = document.createElement('div');
                    cartItemElement.className = 'cart-item flex flex-col sm:flex-row items-start sm:items-center bg-white p-4 sm:p-6 rounded-xl shadow-lg mb-4 sm:space-x-4 group relative';
                    
                    cartItemElement.innerHTML = `
                        <img src="${product.imageUrl}" alt="${product.name}" class="w-full h-36 sm:w-24 sm:h-24 object-cover rounded-lg shadow-md mb-4 sm:mb-0">
                        
                        <div class="cart-item-info flex-grow">
                            <h3 class="text-lg font-bold text-gray-800">${product.name}</h3>
                            <p class="text-sm text-gray-500 mb-2">Beden: ${cartItem.size} | <span class="text-xs font-medium text-green-600">Stok: ${maxStock}</span></p>
                            <p class="text-xl font-extrabold text-primary">${(product.price * cartItem.quantity).toLocaleString('tr-TR', { minimumFractionDigits: 2 })} TL</p>
                        </div>

                        <div class="cart-item-actions flex items-center mt-4 sm:mt-0 space-x-4 w-full sm:w-auto">
                            <!-- Modern Miktar Kontrolü -->
                            <div class="flex items-center border border-gray-300 rounded-lg overflow-hidden w-28">
                                <button class="qty-btn bg-gray-100 hover:bg-gray-200 p-2 text-gray-700 transition disabled:opacity-50 disabled:cursor-not-allowed" 
                                    data-action="minus" data-id="${uniqueId}" ${cartItem.quantity <= 1 ? 'disabled' : ''}>
                                    <i class="fas fa-minus text-xs"></i>
                                </button>
                                <input type="number" value="${cartItem.quantity}" min="1" max="${maxStock}" data-id="${uniqueId}" 
                                    class="qty-input w-8 text-center border-none p-1 text-gray-800 font-semibold focus:ring-0 focus:outline-none bg-white">
                                <button class="qty-btn bg-gray-100 hover:bg-gray-200 p-2 text-gray-700 transition disabled:opacity-50 disabled:cursor-not-allowed" 
                                    data-action="plus" data-id="${uniqueId}" ${isMax ? 'disabled' : ''}>
                                    <i class="fas fa-plus text-xs"></i>
                                </button>
                            </div>
                            
                            <button class="remove-btn text-gray-400 hover:text-red-600 transition p-2 rounded-full absolute top-2 right-2 sm:static sm:p-0" data-id="${uniqueId}">
                                <i class="fas fa-trash text-lg"></i>
                            </button>
                        </div>
                    `;
                    cartContainer.appendChild(cartItemElement);
                });

                // Sepet Özeti
                const shipping = subtotal > 1500 ? 0 : 59.99;
                const total = subtotal + shipping;
                
                // Sepet Özetine Checkout butonu eklendi
                cartSummaryContainer.innerHTML = `
                    <h3 class="text-2xl font-bold mb-4 text-gray-800">Sipariş Özeti</h3>
                    <div class="space-y-3 text-gray-600">
                        <p class="flex justify-between items-center text-lg"><span>Ara Toplam:</span> <strong class="text-gray-800">${subtotal.toLocaleString('tr-TR', { minimumFractionDigits: 2 })} TL</strong></p>
                        <p class="flex justify-between items-center text-lg"><span>Kargo:</span> <strong class="text-green-600">${shipping === 0 ? 'Ücretsiz' : shipping.toLocaleString('tr-TR', {minimumFractionDigits: 2}) + ' TL'}</strong></p>
                    </div>
                    <hr class="my-4 border-gray-200">
                    <p class="total-row flex justify-between items-center text-xl font-extrabold text-gray-900">
                        <span>Toplam:</span> <strong class="text-primary">${total.toLocaleString('tr-TR', {minimumFractionDigits: 2})} TL</strong>
                    </p>
                    <button id="proceed-to-checkout" class="w-full bg-primary hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 mt-6">
                        <i class="fas fa-credit-card mr-2"></i> Ödemeye Geç
                    </button>
                `;
                
                document.getElementById('proceed-to-checkout').addEventListener('click', () => {
                    showPage('checkout');
                    // Yeni sayfaya geçerken, ödeme adımını da başlat
                    updateStep(1);
                });

                // Dinleyici eklemeleri (Miktar, Silme)
                document.querySelectorAll('.qty-input').forEach(input => {
                    input.addEventListener('change', (e) => {
                        const [productId, size] = e.target.dataset.id.split('-');
                        updateQuantity(parseInt(productId), size, e.target.value);
                    });
                });

                document.querySelectorAll('.qty-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const [productId, size] = e.currentTarget.dataset.id.split('-');
                        const action = e.currentTarget.dataset.action;
                        const input = e.currentTarget.parentNode.querySelector('input');
                        let newQuantity = parseInt(input.value);

                        if (action === 'plus') {
                            newQuantity++;
                        } else if (action === 'minus') {
                            newQuantity--;
                        }
                        updateQuantity(parseInt(productId), size, newQuantity);
                    });
                });

                document.querySelectorAll('.remove-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const [productId, size] = e.currentTarget.dataset.id.split('-');
                        removeFromCart(parseInt(productId), size);
                        showToast("Ürün sepetten kaldırıldı.");
                    });
                });
            };
            
            // === İSTEK LİSTESİ İŞLEMLERİ (YENİ) ===

            const updateWishlistCount = () => {
                wishlistCountElement.textContent = wishlist.length;
            };

            const saveWishlist = () => {
                localStorage.setItem('wishlist', JSON.stringify(wishlist));
            };

            const toggleWishlist = (productId) => {
                const index = wishlist.indexOf(productId);
                const product = products.find(p => p.id === productId);

                if (index > -1) {
                    wishlist.splice(index, 1);
                    showToast(`"${product.name}" İstek Listesinden çıkarıldı.`);
                } else {
                    wishlist.push(productId);
                    showToast(`"${product.name}" İstek Listesine eklendi!`);
                }
                
                saveWishlist();
                updateWishlistCount();
                renderProducts(); // Ürün kartlarını güncelle
                if (currentPage === 'wishlist') renderWishlist(); // Eğer wishlist sayfasındaysak onu da güncelle
                
                // Modal üzerindeki butonu güncelle
                const modalWishlistBtn = document.getElementById('modal-wishlist-btn');
                if (modalWishlistBtn) {
                     const isWishlisted = wishlist.includes(productId);
                     modalWishlistBtn.classList.toggle('wishlist-btn-active', isWishlisted);
                     modalWishlistBtn.querySelector('i').classList.toggle('text-red-500', isWishlisted);
                     modalWishlistBtn.querySelector('i').classList.toggle('text-gray-400', !isWishlisted);
                }
            };

            const renderWishlist = () => {
                const wishlistContainer = document.getElementById('wishlist-container');
                const emptyMessage = document.getElementById('empty-wishlist-message');
                wishlistContainer.innerHTML = '';
                
                if (wishlist.length === 0) {
                    emptyMessage.classList.remove('hidden');
                    return;
                }

                emptyMessage.classList.add('hidden');
                
                wishlist.forEach(productId => {
                    const product = products.find(p => p.id === productId);
                    if (!product) return;

                    const productCard = document.createElement('div');
                    productCard.className = 'product-card bg-white rounded-xl shadow-lg overflow-hidden transition duration-300 ease-in-out hover:shadow-2xl hover:-translate-y-1 group relative';
                    productCard.dataset.productId = product.id;
                    
                    productCard.innerHTML = `
                        <!-- Wishlist Butonu (Kaldır) -->
                        <button class="toggle-wishlist absolute top-4 right-4 z-10 p-2 rounded-full bg-white bg-opacity-70 hover:bg-opacity-100 transition shadow-md wishlist-btn-active" 
                                data-product-id="${product.id}">
                            <i class="fas fa-times text-xl text-red-600"></i>
                        </button>

                        <div class="cursor-pointer" onclick="openProductModal(${product.id})">
                            <img src="${product.imageUrl}" alt="${product.name}" class="product-image w-full h-80 object-cover transition-transform duration-500">
                            <div class="p-5 flex flex-col h-auto">
                                <span class="text-xs font-semibold uppercase text-gray-500 mb-1">${product.brand}</span>
                                <h3 class="text-lg font-bold text-gray-800 mb-auto">${product.name}</h3>
                                <p class="text-xl font-extrabold text-primary mt-3">${product.price.toLocaleString('tr-TR', { minimumFractionDigits: 2 })} TL</p>
                            </div>
                        </div>
                    `;
                    wishlistContainer.appendChild(productCard);
                });
                
                // Wishlist'ten kaldırma dinleyicisi
                document.querySelectorAll('#page-wishlist .toggle-wishlist').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const id = parseInt(e.currentTarget.dataset.productId);
                        toggleWishlist(id);
                        showToast("Ürün İstek Listesinden kaldırıldı.");
                    });
                });
            };

            // === ÖDEME (CHECKOUT) İŞLEMLERİ ===
            
            // Adım Görünümünü Güncelleme
            const updateStep = (step) => {
                currentStep = step;
                document.querySelectorAll('.checkout-step').forEach((el, index) => {
                    el.classList.add('hidden');
                    if (index + 1 === step) {
                        el.classList.remove('hidden');
                    }
                });

                document.querySelectorAll('.step-indicator').forEach((el, index) => {
                    const stepNum = index + 1;
                    const numEl = el.querySelector('div');
                    const textEl = el.querySelector('span');

                    if (stepNum < step) {
                        // Tamamlanmış adım
                        numEl.classList.remove('bg-primary', 'border-gray-300', 'text-gray-400');
                        numEl.classList.add('bg-green-500', 'text-white');
                        textEl.classList.remove('text-gray-400', 'font-medium');
                        textEl.classList.add('text-green-600', 'font-semibold');
                    } else if (stepNum === step) {
                        // Mevcut adım
                        numEl.classList.remove('bg-green-500', 'border-gray-300', 'text-gray-400', 'text-white');
                        numEl.classList.add('bg-primary', 'text-white');
                        textEl.classList.remove('text-gray-400', 'font-medium');
                        textEl.classList.add('text-primary', 'font-semibold');
                    } else {
                        // Gelecek adım
                        numEl.classList.remove('bg-primary', 'bg-green-500', 'text-white');
                        numEl.classList.add('border-2', 'border-gray-300', 'text-gray-400');
                        textEl.classList.remove('text-primary', 'font-semibold', 'text-green-600');
                        textEl.classList.add('text-gray-400', 'font-medium');
                    }
                });

                if (step === 3) {
                    renderCheckoutSummary();
                }
            };
            
            // Alanları Kontrol Etme (Gelişmiş Validasyon)
            const validateStep = (step) => {
                const stepElement = document.getElementById(`step-${step}`);
                const requiredInputs = stepElement.querySelectorAll('[required]');
                let isValid = true;
                
                requiredInputs.forEach(input => {
                    const errorElement = document.getElementById(`error-${input.id.replace('checkout-', '')}`);
                    
                    if (!input.value.trim() || !input.checkValidity()) {
                        input.classList.add('border-red-500', 'ring-1', 'ring-red-500');
                        if (errorElement) errorElement.classList.remove('hidden');
                        isValid = false;
                    } else {
                        input.classList.remove('border-red-500', 'ring-1', 'ring-red-500');
                        if (errorElement) errorElement.classList.add('hidden');

                        // Veriyi kaydet
                        checkoutData[input.id.replace('checkout-', '')] = input.value.trim();
                        localStorage.setItem('checkoutData', JSON.stringify(checkoutData)); // YENİ: Kullanıcı bilgisini kaydet
                    }
                });

                if (!isValid) {
                    showToast("Lütfen tüm zorunlu alanları doğru doldurunuz.");
                }
                return isValid;
            }

            // İleri Gitme
            window.nextStep = () => {
                if (validateStep(currentStep)) {
                    if (currentStep < 3) {
                        updateStep(currentStep + 1);
                    }
                }
            };

            // Geri Gitme
            window.prevStep = () => {
                if (currentStep > 1) {
                    updateStep(currentStep - 1);
                }
            };

            // Ödeme Özeti oluşturma
            const renderCheckoutSummary = () => {
                const summaryContainer = document.getElementById('checkout-summary-container');
                const summaryPersonal = document.getElementById('summary-personal');
                const summaryAddress = document.getElementById('summary-address');
                
                let subtotal = 0;
                
                const itemsHtml = cart.map(cartItem => {
                    const product = products.find(p => p.id === cartItem.id);
                    if (!product) return '';
                    
                    subtotal += product.price * cartItem.quantity;
                    const itemTotal = (product.price * cartItem.quantity).toLocaleString('tr-TR', { minimumFractionDigits: 2 });

                    return `<div class="flex justify-between text-sm py-1 border-b border-gray-100">
                                <span class="text-gray-600">${cartItem.quantity}x ${product.name} (${cartItem.size})</span>
                                <span class="font-medium text-gray-800">${itemTotal} TL</span>
                            </div>`;
                }).join('');

                const shipping = subtotal > 1500 ? 0 : 59.99;
                const total = subtotal + shipping;

                summaryContainer.innerHTML = `
                    <h4 class="font-bold text-lg mb-3 text-gray-800 border-b pb-2">Sipariş Detayı (${cart.length} Ürün)</h4>
                    <div class="max-h-48 overflow-y-auto pr-2 mb-4">${itemsHtml}</div>
                    <div class="space-y-2 text-gray-700 bg-gray-50 p-4 rounded-lg">
                        <p class="flex justify-between items-center"><span>Ara Toplam:</span> <strong class="text-gray-800">${subtotal.toLocaleString('tr-TR', { minimumFractionDigits: 2 })} TL</strong></p>
                        <p class="flex justify-between items-center"><span>Kargo:</span> <strong class="text-green-600">${shipping === 0 ? 'Ücretsiz' : shipping.toLocaleString('tr-TR', {minimumFractionDigits: 2}) + ' TL'}</strong></p>
                        <hr class="border-gray-200">
                        <p class="flex justify-between items-center text-xl font-extrabold text-gray-900">
                            <span>TOPLAM TUTAR:</span> <strong class="text-primary">${total.toLocaleString('tr-TR', {minimumFractionDigits: 2})} TL</strong>
                        </p>
                    </div>
                `;

                // Kişisel Bilgileri Özete Yazma
                summaryPersonal.innerHTML = `
                    <strong>${checkoutData.name} ${checkoutData.surname}</strong><br>
                    T.C. No: ${checkoutData.tc}<br>
                    E-posta: ${checkoutData.email} | Telefon: ${checkoutData.phone}
                `;
                summaryAddress.innerHTML = `
                    <strong>${checkoutData.addressTitle}</strong><br>
                    ${checkoutData.street}, ${checkoutData.district} / ${checkoutData.city}<br>
                    Posta Kodu: ${checkoutData.zip}
                `;
                
            }

            // Satın Alma Simulasyonu
            window.completePurchase = () => {
                if (cart.length === 0) {
                    showToast("Sepetiniz boş! Ödeme yapılamaz.");
                    showPage('home');
                    return;
                }
                
                // YENİ: Siparişi simüle edilmiş siparişler listesine ekle
                const orderTotal = cart.reduce((sum, item) => {
                    const product = products.find(p => p.id === item.id);
                    return sum + (product ? product.price * item.quantity : 0);
                }, 0);
                const shipping = orderTotal > 1500 ? 0 : 59.99;
                const grandTotal = orderTotal + shipping;

                const newOrder = {
                    id: Math.floor(Math.random() * 1000000), // Rastgele sipariş ID
                    date: new Date().toLocaleDateString('tr-TR'),
                    items: cart,
                    total: grandTotal.toLocaleString('tr-TR', { minimumFractionDigits: 2 }) + ' TL',
                    status: 'Hazırlanıyor',
                    address: `${checkoutData.addressTitle} - ${checkoutData.city}`
                };

                simulatedOrders.unshift(newOrder); // Yeni siparişi listenin başına ekle
                localStorage.setItem('simulatedOrders', JSON.stringify(simulatedOrders));


                cart = []; // Sepeti temizle
                saveCart(); // localStorage'ı güncelle
                updateCartCount(); // Sayacı güncelle
                document.getElementById('success-modal').classList.remove('hidden'); // Başarı modalını göster
            };
            
            // === KULLANICI PROFİLİ İŞLEMLERİ (YENİ) ===
            const renderProfile = () => {
                // 1. Kişisel Bilgileri Doldur
                document.getElementById('profile-name-surname').textContent = checkoutData.name && checkoutData.surname ? `${checkoutData.name} ${checkoutData.surname}` : 'Bilgi Yok';
                document.getElementById('profile-tc').textContent = checkoutData.tc || 'Bilgi Yok';
                document.getElementById('profile-email').textContent = checkoutData.email || 'Bilgi Yok';
                document.getElementById('profile-phone').textContent = checkoutData.phone || 'Bilgi Yok';

                // 2. Adres Bilgisini Doldur
                const profileAddress = document.getElementById('profile-address-info');
                if (checkoutData.street) {
                    profileAddress.innerHTML = `
                        <strong>${checkoutData.addressTitle || 'Varsayılan Adres'}</strong><br>
                        ${checkoutData.street}, ${checkoutData.district} / ${checkoutData.city}<br>
                        Posta Kodu: ${checkoutData.zip}
                    `;
                } else {
                    profileAddress.innerHTML = 'Adres bilgisi bulunamadı. Lütfen bir sipariş vererek kaydediniz.';
                }
                
                // 3. Siparişleri Doldur
                const ordersList = document.getElementById('profile-orders-list');
                const noOrdersMessage = document.getElementById('no-orders-message');
                ordersList.innerHTML = '';
                
                if (simulatedOrders.length === 0) {
                    noOrdersMessage.classList.remove('hidden');
                    return;
                }
                noOrdersMessage.classList.add('hidden');

                simulatedOrders.forEach(order => {
                    const orderElement = document.createElement('div');
                    orderElement.className = 'bg-white p-4 border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition';
                    
                    const itemSummary = order.items.map(item => {
                         const product = products.find(p => p.id === item.id);
                         return product ? `${item.quantity}x ${product.name} (${item.size})` : '';
                    }).join(', ');

                    orderElement.innerHTML = `
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="font-bold text-lg text-gray-800">Sipariş #${order.id}</h4>
                            <span class="text-sm font-semibold px-3 py-1 rounded-full bg-yellow-100 text-yellow-800">${order.status}</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-1">Tarih: ${order.date}</p>
                        <p class="text-sm text-gray-600 mb-1">Teslimat Adresi: ${order.address}</p>
                        <p class="text-sm text-gray-600">Ürünler: ${itemSummary.substring(0, 100)}...</p>
                        <p class="text-xl font-extrabold text-primary mt-2">Toplam: ${order.total}</p>
                    `;
                    ordersList.appendChild(orderElement);
                });
            };

            // === BAŞLANGIÇ ===
            updateTitle(currentPage);
            loadBrandFilters();
            renderProducts();
            updateCartCount();
            updateWishlistCount(); // YENİ: İstek listesi sayacını yükle
        });
    </script>
</body>
</html>
